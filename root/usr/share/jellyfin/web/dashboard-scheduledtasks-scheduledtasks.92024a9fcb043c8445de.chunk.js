"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[570],{16735:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}}),a(69217),a(76056),a(72326);var s=a(56705),n=a(47005),i=a(44614),l=a(1197),r=a(64258),o=a(24724),d=a(9785);function c(t){ApiClient.getScheduledTasks({isHidden:!1}).then((function(e){!function(t,e){var a;e=e.sort((function(t,e){return(t=t.Category+" "+t.Name)==(e=e.Category+" "+e.Name)?0:t<e?-1:1}));for(var s="",n=0;n<e.length;n++){var l=e[n];l.Category!=a&&((a=l.Category)&&(s+="</div>",s+="</div>"),s+='<div class="verticalSection verticalSection-extrabottompadding">',s+='<div class="sectionTitleContainer" style="margin-bottom:1em;">',s+='<h2 class="sectionTitle">',s+=a,s+="</h2>",0===n&&(s+='<a is="emby-linkbutton" class="raised button-alt headerHelpButton" target="_blank" href="https://docs.jellyfin.org/general/server/tasks.html">'+i.ZP.translate("Help")+"</a>"),s+="</div>",s+='<div class="paperList">'),s+='<div class="listItem listItem-border scheduledTaskPaperIconItem" data-status="'+l.State+'">',s+="<a is='emby-linkbutton' style='margin:0;padding:0;' class='clearLink listItemIconContainer' href='scheduledtask.html?id="+l.Id+"'>",s+='<span class="material-icons listItemIcon schedule" aria-hidden="true"></span>',s+="</a>",s+='<div class="listItemBody two-line">',s+="<a class='clearLink' style='margin:0;padding:0;display:block;text-align:left;' is='emby-linkbutton' href='scheduledtask.html?id="+l.Id+"'>",s+="<h3 class='listItemBodyText'>"+l.Name+"</h3>",s+="<div class='secondary listItemBodyText' id='taskProgress"+l.Id+"'>"+u(l)+"</div>",s+="</a>",s+="</div>","Running"===l.State?s+='<button type="button" is="paper-icon-button-light" id="btnTask'+l.Id+'" class="btnStopTask" data-taskid="'+l.Id+'" title="'+i.ZP.translate("ButtonStop")+'"><span class="material-icons stop" aria-hidden="true"></span></button>':"Idle"===l.State&&(s+='<button type="button" is="paper-icon-button-light" id="btnTask'+l.Id+'" class="btnStartTask" data-taskid="'+l.Id+'" title="'+i.ZP.translate("ButtonStart")+'"><span class="material-icons play_arrow" aria-hidden="true"></span></button>'),s+="</div>"}e.length&&(s+="</div>",s+="</div>"),t.querySelector(".divScheduledTasks").innerHTML=s}(t,e),s.ZP.hide()}))}function u(t){var e="";if("Idle"===t.State){if(t.LastExecutionResult){var a=Date.parse(t.LastExecutionResult.EndTimeUtc),s=Date.parse(t.LastExecutionResult.StartTimeUtc);e+=i.ZP.translate("LabelScheduledTaskLastRan",(0,r.Z)(a,(0,d.LP)()),(0,o.Z)(s,a,{locale:(0,d.Kd)()})),"Failed"===t.LastExecutionResult.Status?e+=" <span style='color:#FF0000;'>("+i.ZP.translate("LabelFailed")+")</span>":"Cancelled"===t.LastExecutionResult.Status?e+=" <span style='color:#0026FF;'>("+i.ZP.translate("LabelCancelled")+")</span>":"Aborted"===t.LastExecutionResult.Status&&(e+=" <span style='color:#FF0000;'>"+i.ZP.translate("LabelAbortedByServerShutdown")+"</span>")}}else if("Running"===t.State){var n=(t.CurrentProgressPercentage||0).toFixed(1);e+='<div style="display:flex;align-items:center;">',e+='<div class="taskProgressOuter" title="'+n+'%" style="flex-grow:1;">',e+='<div class="taskProgressInner" style="width:'+n+'%;">',e+="</div>",e+="</div>",e+="<span style='color:#00a4dc;margin-left:5px;'>"+n+"%</span>",e+="</div>"}else e+="<span style='color:#FF0000;'>"+i.ZP.translate("LabelStopping")+"</span>";return e}function Z(t,e){var a=t.querySelector(".material-icons");a.classList.remove("stop","play_arrow"),a.classList.add(e)}function p(t,e){"Running"===e?(t.classList.remove("btnStartTask"),t.classList.add("btnStopTask"),Z(t,"stop"),t.title=i.ZP.translate("ButtonStop")):"Idle"===e&&(t.classList.add("btnStartTask"),t.classList.remove("btnStopTask"),Z(t,"play_arrow"),t.title=i.ZP.translate("ButtonStart")),$(t).parents(".listItem")[0].setAttribute("data-status",e)}function h(t){function e(){ApiClient.isMessageChannelOpen()||c(t)}function a(e,a,s){a.serverId()===r&&function(e){for(var a=0;a<e.length;a++){var s=e[a];t.querySelector("#taskProgress"+s.Id).innerHTML=u(s),p(t.querySelector("#btnTask"+s.Id),s.State)}}(s)}var i,r=ApiClient.serverId();$(".divScheduledTasks",t).on("click",".btnStartTask",(function(){var e=this,a=e.getAttribute("data-taskid");ApiClient.startScheduledTask(a).then((function(){p(e,"Running"),c(t)}))})),$(".divScheduledTasks",t).on("click",".btnStopTask",(function(){var e=this,a=e.getAttribute("data-taskid");ApiClient.stopScheduledTask(a).then((function(){p(e,""),c(t)}))})),t.addEventListener("viewbeforehide",(function(){n.Events.off(l.default,"ScheduledTasksInfo",a),ApiClient.sendMessage("ScheduledTasksInfoStop"),i&&clearInterval(i)})),t.addEventListener("viewshow",(function(){s.ZP.show(),ApiClient.sendMessage("ScheduledTasksInfoStart","1000,1000"),i&&clearInterval(i),i=setInterval(e,1e4),c(t),n.Events.on(l.default,"ScheduledTasksInfo",a)}))}a(664),a(78066)},9785:function(t,e,a){a.d(e,{Kd:function(){return nt},LP:function(){return it}}),a(52077),a(911);var s=a(77946),n=a(42845),i=a(11401),l=a(84146),r=a(59996),o=a(78210),d=a(9477),c=a(28024),u=a(33026),Z=a(91814),p=a(88303),h=a(22410),f=a(35997),v=a(73956),k=a(86496),b=a(47182),g=a(87994),S=a(6902),m=a(35163),y=a(36749),I=a(89310),L=a(22481),T=a(75710),P=a(11109),C=a(74270),x=a(37159),w=a(27324),A=a(68490),E=a(19046),F=a(81905),R=a(19656),B=a(5905),H=a(64660),M=a(82025),q=a(69509),_=a(69984),z=a(84216),N=a(195),$=a(77411),j=a(23282),D=a(42395),K=a(30318),O=a(45614),U=a(83305),W=a(95861),G=a(37405),J=a(6148),Q=a(63258),V=a(50281),X=a(67889),Y=a(44362),tt=a(69244),et=a(96730),at=a(44614),st=function(t){return{af:s.Z,ar:n.Z,"be-by":i.Z,"bg-bg":l.Z,bn:r.Z,ca:o.Z,cs:d.Z,cy:c.Z,da:u.Z,de:Z.Z,el:p.Z,"en-gb":h.Z,"en-us":f.Z,eo:v.Z,es:k.Z,"es-ar":k.Z,"es-do":k.Z,"es-mx":k.Z,et:b.Z,eu:g.Z,fa:S.Z,fi:m.Z,fr:y.Z,"fr-ca":I.Z,gl:L.Z,gsw:Z.Z,he:T.Z,"hi-in":P.Z,hr:C.Z,hu:x.Z,id:w.Z,is:A.Z,it:E.Z,ja:F.Z,kk:R.Z,ko:B.Z,"lt-lt":H.Z,lv:M.Z,ms:q.Z,nb:_.Z,nl:z.Z,nn:N.Z,pl:$.Z,pt:j.Z,"pt-br":D.Z,"pt-pt":j.Z,ro:K.Z,ru:O.Z,sk:U.Z,"sl-si":W.Z,sv:G.Z,ta:J.Z,th:Q.Z,tr:V.Z,uk:X.Z,vi:Y.Z,"zh-cn":tt.Z,"zh-hk":tt.Z,"zh-tw":et.Z}[t]};function nt(){return st(at.ZP.getCurrentLocale())||st(at.ZP.getCurrentLocale().replace(/-.*/,""))||f.Z}function it(){return{addSuffix:!0,locale:nt()}}e.ZP={getLocale:nt,getLocaleWithSuffix:it}}}]);