"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1121],{71121:function(e,t,a){a.r(t),a.d(t,{default:function(){return $},show:function(){return F}}),a(5769),a(98010),a(63238),a(69217),a(61418),a(17460),a(14078),a(32081);var n=a(90914),i=a(56705),r=a(83094),s=a(78695),o=a(27515),d=a(44614),l=a(74227),c=a(21361),u=a(47518),m=a(94389),g=(a(46650),a(6626),a(78066),a(21865),a(1892)),p=a.n(g),h=a(95760),b=a.n(h),v=a(38311),f=a.n(v),I=a(58192),y=a.n(I),C=a(38060),Z=a.n(C),S=a(54865),x=a.n(S),k=a(57882),T={};T.styleTagTransform=x(),T.setAttributes=y(),T.insert=f().bind(null,"head"),T.domAPI=b(),T.insertStyleElement=Z(),p()(k.Z,T),k.Z&&k.Z.locals&&k.Z.locals;var P,w=a(53913),A=a(61642),B=a(56346),M=!u.Z.slow&&!u.Z.edge,L=!1;function z(e,t,a){var n;i.ZP.show(),t?(n=w.Z.getApiClient(t.ServerId),D(e,t,n,a)):(n=w.Z.getApiClient(P.ServerId)).getItem(n.getCurrentUserId(),P.Id).then((function(t){D(e,t,n,a)}))}function E(e,t,a,n){e.addEventListener(a,(function(e){var a=r.ZP.parentWithClass(e.target,t);a&&n.call(a,e)}))}function D(e,t,a,n){P=t,a.getRemoteImageProviders(function(){var e={};return e.itemId=P.Id,e}()).then((function(t){for(var r=e.querySelectorAll(".btnBrowseAllImages"),d=0,l=r.length;d<l;d++)t.length?r[d].classList.remove("hide"):r[d].classList.add("hide");a.getItemImageInfos(P.Id).then((function(r){!function(e,t,a,n,i){var r=n.filter((function(e){return"Screenshot"!==e.ImageType&&"Backdrop"!==e.ImageType&&"Chapter"!==e.ImageType}));U(0,0,t,r,i,e.querySelector("#images"))}(e,a,0,r,t),function(e,t,a,n,i){var r=n.filter((function(e){return"Backdrop"===e.ImageType})).sort((function(e,t){return e.ImageIndex-t.ImageIndex}));r.length?(e.querySelector("#backdropsContainer",e).classList.remove("hide"),U(0,0,t,r,i,e.querySelector("#backdrops"))):e.querySelector("#backdropsContainer",e).classList.add("hide")}(e,a,0,r,t),function(e,t,a,n,i){var r=n.filter((function(e){return"Screenshot"===e.ImageType})).sort((function(e,t){return e.ImageIndex-t.ImageIndex}));r.length?(e.querySelector("#screenshotsContainer",e).classList.remove("hide"),U(0,0,t,r,i,e.querySelector("#screenshots"))):e.querySelector("#screenshotsContainer",e).classList.add("hide")}(e,a,0,r,t),i.ZP.hide(),s.Z.tv&&o.Z.autoFocus(n||e)}))}))}function q(e,t,a,n,i,r,o,l){var c="",u="card scalableCard imageEditorCard";u+=" backdropCard backdropCard-scalable","button"===o?(u+=" btnImageCard",s.Z.tv&&(u+=" show-focus",M&&(u+=" show-animation")),c+='<button type="button" class="'+u+'"'):c+='<div class="'+u+'"',c+=' data-id="'+P.Id+'" data-serverid="'+n.serverId()+'" data-index="'+t+'" data-numimages="'+a+'" data-imagetype="'+e.ImageType+'" data-providers="'+i.length+'"',c+=">",c+='<div class="cardBox visualCardBox">',c+='<div class="cardScalable visualCardBox-cardScalable" style="background-color:transparent;">',c+='<div class="cardPadder-backdrop"></div>',c+='<div class="cardContent">';var m=function(e,t,a,n,i){return(i=i||{}).type=a,i.index=n,i.tag="Backdrop"===a?e.BackdropImageTags[n]:"Screenshot"===a?e.ScreenshotImageTags[n]:"Primary"===a&&e.PrimaryImageTag||e.ImageTags[a],t.getScaledImageUrl(e.Id||e.ItemId,i)}(P,n,e.ImageType,e.ImageIndex,{maxWidth:r});return c+='<div class="cardImageContainer" style="background-image:url(\''+m+"');background-position:center center;background-size:contain;\"></div>",c+="</div>",c+="</div>",c+='<div class="cardFooter visualCardBox-cardFooter">',c+='<h3 class="cardText cardTextCentered" style="margin:0;">'+d.ZP.translate(""+e.ImageType)+"</h3>",c+='<div class="cardText cardText-secondary cardTextCentered">',e.Width&&e.Height?c+=e.Width+" X "+e.Height:c+="&nbsp;",c+="</div>",l&&(c+='<div class="cardText cardTextCentered">',"Backdrop"===e.ImageType||"Screenshot"===e.ImageType?(c+=t>0?'<button type="button" is="paper-icon-button-light" class="btnMoveImage autoSize" data-imagetype="'+e.ImageType+'" data-index="'+e.ImageIndex+'" data-newindex="'+(e.ImageIndex-1)+'" title="'+d.ZP.translate("MoveLeft")+'"><span class="material-icons chevron_left"></span></button>':'<button type="button" is="paper-icon-button-light" class="autoSize" disabled title="'+d.ZP.translate("MoveLeft")+'"><span class="material-icons chevron_left" aria-hidden="true"></span></button>',c+=t<a-1?'<button type="button" is="paper-icon-button-light" class="btnMoveImage autoSize" data-imagetype="'+e.ImageType+'" data-index="'+e.ImageIndex+'" data-newindex="'+(e.ImageIndex+1)+'" title="'+d.ZP.translate("MoveRight")+'"><span class="material-icons chevron_right" aria-hidden="true"></span></button>':'<button type="button" is="paper-icon-button-light" class="autoSize" disabled title="'+d.ZP.translate("MoveRight")+'"><span class="material-icons chevron_right" aria-hidden="true"></span></button>'):i.length&&(c+='<button type="button" is="paper-icon-button-light" data-imagetype="'+e.ImageType+'" class="btnSearchImages autoSize" title="'+d.ZP.translate("Search")+'"><span class="material-icons search" aria-hidden="true"></span></button>'),c+='<button type="button" is="paper-icon-button-light" data-imagetype="'+e.ImageType+'" data-index="'+(null!=e.ImageIndex?e.ImageIndex:"null")+'" class="btnDeleteImage autoSize" title="'+d.ZP.translate("Delete")+'"><span class="material-icons delete" aria-hidden="true"></span></button>',c+="</div>"),c+="</div>",(c+="</div>")+"</"+o+">"}function W(e,t,a,n,i,r){var s=function(){i.deleteItemImage(t,a,n).then((function(){L=!0,z(e)}))};r?(0,B.Z)({text:d.ZP.translate("ConfirmDeleteImage"),confirmText:d.ZP.translate("Delete"),primary:"delete"}).then(s):s()}function H(e,t,a,n,i,r,s){t.updateItemImageIndex(a,n,i,r).then((function(){L=!0,z(e,null,s)}),(function(){(0,A.Z)(d.ZP.translate("ErrorDefault"))}))}function U(e,t,a,n,i,o){var d="",l=300,u=r.ZP.getWindowSize();u.innerWidth>=1280&&(l=Math.round(u.innerWidth/4));for(var m=s.Z.tv?"button":"div",g=!s.Z.tv,p=0,h=n.length;p<h;p++)d+=q(n[p],p,h,a,i,l,m,g);o.innerHTML=d,c.default.lazyChildren(o)}function O(e,t){a.e(982).then(a.bind(a,30982)).then((function(a){a.show(P.Id,P.ServerId,P.Type,t,"Season"==P.Type?P.ParentId:null).then((function(){L=!0,z(e)}))}))}function F(e){return new Promise((function(t,o){L=!1,function(e,t,o){var c=e.itemId,u=e.serverId;i.ZP.show();var g=w.Z.getApiClient(u);g.getItem(g.getCurrentUserId(),c).then((function(c){var u={removeOnClose:!0};s.Z.tv?u.size="fullscreen":u.size="small";var g=n.default.createDialog(u);g.classList.add("formDialog"),g.innerHTML=d.ZP.translateHtml('<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"> ${HeaderEditImages} </h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner"> <div id="imagesContainer"> <div class="imageEditor-buttons first-imageEditor-buttons"> <h2 style="margin:0">${Images}</h2> <button type="button" is="emby-button" class="btnBrowseAllImages fab mini autoSize" style="margin-left:1em"> <span class="material-icons search" aria-hidden="true"></span> </button> <button type="button" is="emby-button" class="btnOpenUploadMenu fab mini hide" style="margin-left:.5em"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div id="images" class="itemsContainer vertical-wrap"> </div> <br/> </div> <div id="backdropsContainer" class="hide"> <div class="imageEditor-buttons"> <h2 style="margin:0">${Backdrops}</h2> <button type="button" is="emby-button" class="btnBrowseAllImages fab mini autoSize" style="margin-left:1em" data-imagetype="Backdrop"> <span class="material-icons search" aria-hidden="true"></span> </button> <button type="button" is="emby-button" class="btnOpenUploadMenu fab mini hide" style="margin-left:.5em" data-imagetype="Backdrop"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div id="backdrops" class="itemsContainer vertical-wrap"> </div> <br/> </div> <div id="screenshotsContainer" class="hide"> <div class="imageEditor-buttons"> <h2 style="margin:0">${Screenshots}</h2> <button type="button" is="emby-button" class="btnBrowseAllImages fab mini autoSize" style="margin-left:1em" data-imagetype="Screenshot"> <span class="material-icons search" aria-hidden="true"></span> </button> <button type="button" is="emby-button" class="btnOpenUploadMenu fab mini hide" style="margin-left:.5em" data-imagetype="Screenshot"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div id="screenshots" class="itemsContainer vertical-wrap"> </div> </div> </div> </div> ',"core"),s.Z.tv&&l.default.centerFocus.on(g,!1),function(e,t){for(var n=e.querySelectorAll(".btnOpenUploadMenu"),i=m.M.supports("fileinput"),s=0,o=n.length;s<o;s++)i?n[s].classList.remove("hide"):n[s].classList.add("hide");E(e,"btnOpenUploadMenu","click",(function(){var n=this.getAttribute("data-imagetype");a.e(5356).then(a.bind(a,25356)).then((function(a){a.default.show({theme:t.theme,imageType:n,itemId:P.Id,serverId:P.ServerId}).then((function(t){t&&(L=!0,z(e))}))}))})),E(e,"btnSearchImages","click",(function(){O(e,this.getAttribute("data-imagetype"))})),E(e,"btnBrowseAllImages","click",(function(){O(e,this.getAttribute("data-imagetype")||"Primary")})),E(e,"btnImageCard","click",(function(){!function(e,t){var n=t.getAttribute("data-id"),i=t.getAttribute("data-serverid"),s=w.Z.getApiClient(i),o=t.getAttribute("data-imagetype"),l=parseInt(t.getAttribute("data-index")),c=parseInt(t.getAttribute("data-providers")),u=parseInt(t.getAttribute("data-numimages"));Promise.resolve().then(a.bind(a,78407)).then((function(a){var i=a.default,m=[];m.push({name:d.ZP.translate("Delete"),id:"delete"}),"Backdrop"!==o&&"Screenshot"!==o||(l>0&&m.push({name:d.ZP.translate("MoveLeft"),id:"moveleft"}),l<u-1&&m.push({name:d.ZP.translate("MoveRight"),id:"moveright"})),c&&m.push({name:d.ZP.translate("Search"),id:"search"}),i.show({items:m,positionTo:t}).then((function(a){switch(a){case"delete":W(e,n,o,l,s,!1);break;case"search":O(e,o);break;case"moveleft":H(e,s,n,o,l,l-1,r.ZP.parentWithClass(t,"itemsContainer"));break;case"moveright":H(e,s,n,o,l,l+1,r.ZP.parentWithClass(t,"itemsContainer"))}}))}))}(e,this)})),E(e,"btnDeleteImage","click",(function(){var t=this.getAttribute("data-imagetype"),a=this.getAttribute("data-index");a="null"===a?null:parseInt(a);var n=w.Z.getApiClient(P.ServerId);W(e,P.Id,t,a,n,!0)})),E(e,"btnMoveImage","click",(function(){var t=this.getAttribute("data-imagetype"),a=this.getAttribute("data-index"),n=this.getAttribute("data-newindex"),i=w.Z.getApiClient(P.ServerId);H(e,i,P.Id,t,a,n,r.ZP.parentWithClass(this,"itemsContainer"))}))}(g,e),g.addEventListener("close",(function(){s.Z.tv&&l.default.centerFocus.off(g,!1),i.ZP.hide(),L?t():o()})),n.default.open(g),z(g,c),g.querySelector(".btnCancel").addEventListener("click",(function(){n.default.close(g)}))}))}(e,t,o)}))}var $={show:F}},57882:function(e,t,a){var n=a(54933),i=a.n(n),r=a(93476),s=a.n(r)()(i());s.push([e.id,".imageEditor-buttons{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;margin:1em 0}.first-imageEditor-buttons{margin-top:2em}",""]),t.Z=s}}]);