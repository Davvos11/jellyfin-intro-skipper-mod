"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7051,2657],{29955:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}}),r(5769),r(86248),r(95623),r(23938),r(63238),r(61418),r(17460),r(14078),r(72410),r(15610),r(52077),r(25901),r(92189),r(91047);var n=r(31699),a=r.n(n),i=r(93629),o=r(94389),c=r(67469),l=r(83094),s=r(56705),u=r(78695),d=r(3319),v=r(47518),f=r(44614),m=(r(46650),r(45368),r(76543)),h=r(53913),g=r(25152),y=r(90914),b=r(61642),S=r(61097);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r,n,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}r(35075);var q=!v.Z.slow&&!v.Z.edge;function C(e,t,r,n){s.ZP.show(),t.authenticateUserByName(r,n).then((function(e){var r=e.User;s.ZP.hide(),P(r.Id,e.AccessToken,t)}),(function(t){if(e.querySelector("#txtManualPassword").value="",s.ZP.hide(),[401,403].includes(t.status)){var r=401===t.status?"MessageInvalidUser":"MessageUnauthorizedUser";(0,g.Z)(f.ZP.translate(r))}else m.ZP.alert({message:f.ZP.translate("MessageUnableToConnectToServer"),title:f.ZP.translate("HeaderConnectionFailure")})}))}function P(e,t,r){m.ZP.onServerChanged(e,t,r),m.ZP.navigate("home.html")}function Z(e,t,r){e.querySelector(".chkRememberLogin").checked=c.Z.enableAutoLogin(),e.querySelector(".manualLoginForm").classList.remove("hide"),e.querySelector(".visualLoginForm").classList.add("hide"),e.querySelector(".btnManual").classList.add("hide"),r?e.querySelector("#txtManualPassword").focus():e.querySelector("#txtManualName").focus(),t?e.querySelector(".btnCancel").classList.remove("hide"):e.querySelector(".btnCancel").classList.add("hide")}function w(e,t){function n(){var e=t.serverid;return e?h.Z.getOrCreateApiClient(e):ApiClient}function v(){e.querySelector(".visualLoginForm").classList.remove("hide"),e.querySelector(".manualLoginForm").classList.add("hide"),e.querySelector(".btnManual").classList.remove("hide"),Promise.resolve().then(r.bind(r,6610)).then((function(t){t.default.autoFocus(e)}))}e.querySelector("#divUsers").addEventListener("click",(function(t){var r=l.ZP.parentWithClass(t.target,"card"),a=r?r.querySelector(".cardContent"):null;if(a){var i=e,o=a.getAttribute("data-userid"),c=a.getAttribute("data-username"),s=a.getAttribute("data-haspw");"manual"===o?(i.querySelector("#txtManualName").value="",Z(i,!0)):"false"==s?C(i,n(),c,""):(i.querySelector("#txtManualName").value=c,i.querySelector("#txtManualPassword").value="",Z(i,!0,!0))}})),e.querySelector(".manualLoginForm").addEventListener("submit",(function(t){c.Z.enableAutoLogin(e.querySelector(".chkRememberLogin").checked);var r=n();return C(e,r,e.querySelector("#txtManualName").value,e.querySelector("#txtManualPassword").value),t.preventDefault(),!1})),e.querySelector(".btnForgotPassword").addEventListener("click",(function(){m.ZP.navigate("forgotpassword.html")})),e.querySelector(".btnCancel").addEventListener("click",v),e.querySelector(".btnQuick").addEventListener("click",(function(){return e=n(),t=e.getUrl("/QuickConnect/Initiate"),e.getJSON(t).then((function(t){if(!t.Secret||!t.Code)return console.error("Malformed quick connect response",t),!1;(0,b.Z)({dialogOptions:{id:"quickConnectAlert"},title:f.ZP.translate("QuickConnect"),text:f.ZP.translate("QuickConnectAuthorizeCode",t.Code)});var r=e.getUrl("/QuickConnect/Connect?Secret="+t.Secret),n=setInterval((function(){e.getJSON(r).then(function(){var t,r=(t=regeneratorRuntime.mark((function t(r){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.Authenticated){t.next=2;break}return t.abrupt("return");case 2:return clearInterval(n),(a=document.getElementById("quickConnectAlert"))&&y.default.close(a),t.next=7,e.quickConnect(r.Secret);case 7:P((i=t.sent).User.Id,i.AccessToken,e);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(e){k(i,n,a,o,c,"next",e)}function c(e){k(i,n,a,o,c,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),(function(e){clearInterval(n);var t=document.getElementById("quickConnectAlert");t&&y.default.close(t),m.ZP.alert({message:f.ZP.translate("QuickConnectDeactivated"),title:f.ZP.translate("HeaderError")}),console.error("Unable to login with quick connect",e)}))}),5e3,r);return!0}),(function(e){return m.ZP.alert({message:f.ZP.translate("QuickConnectNotActive"),title:f.ZP.translate("HeaderError")}),console.error("Quick connect error: ",e),!1})),!1;var e,t})),e.querySelector(".btnManual").addEventListener("click",(function(){e.querySelector("#txtManualName").value="",Z(e,!0)})),e.querySelector(".btnSelectServer").addEventListener("click",(function(){m.ZP.selectServer()})),e.addEventListener("viewshow",(function(){s.ZP.show(),d.Z.setTransparentMenu(!0),o.M.supports("multiserver")||e.querySelector(".btnSelectServer").classList.add("hide");var t=n();t.getQuickConnect("Enabled").then((function(t){!0===t&&e.querySelector(".btnQuick").classList.remove("hide")})).catch((function(){console.debug("Failed to get QuickConnect status")})),t.getPublicUsers().then((function(r){r.length?(v(),function(e,t,r){for(var n="",a=0;a<r.length;a++){var i=r[a],o="card squareCard scalableCard squareCard-scalable";u.Z.tv&&(o+=" show-focus",q&&(o+=" show-animation")),n+='<button type="button" class="'+o+'">',n+='<div class="cardBox cardBox-bottompadded">',n+='<div class="cardScalable">',n+='<div class="cardPadder cardPadder-square"></div>',n+='<div class="cardContent" data-haspw="'.concat(i.HasPassword,'" data-username="').concat(i.Name,'" data-userid="').concat(i.Id,'">'),i.PrimaryImageTag?n+='<div class="cardImageContainer coveredImage" style="background-image:url(\''+t.getUserImageUrl(i.Id,{width:300,tag:i.PrimaryImageTag,type:"Primary"})+"');\"></div>":(n+='<div class="cardImage flex align-items-center justify-content-center '.concat(S.default.getDefaultBackgroundClass(),'">'),n+='<span class="material-icons cardImageIcon person" aria-hidden="true"></span>',n+="</div>"),n+="</div>",n+="</div>",n+='<div class="cardFooter visualCardBox-cardFooter">',n+='<div class="cardText singleCardText cardTextCentered">'+i.Name+"</div>",n+="</div>",n+="</div>",n+="</button>"}e.querySelector("#divUsers").innerHTML=n}(e,t,r)):(e.querySelector("#txtManualName").value="",Z(e,!1,!1))})).catch().then((function(){s.ZP.hide()})),t.getJSON(t.getUrl("Branding/Configuration")).then((function(t){var r=e.querySelector(".disclaimer");r.innerHTML=a().sanitize((0,i.TU)(t.LoginDisclaimer||""));var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}(r.querySelectorAll("a"));try{for(o.s();!(n=o.n()).done;){var c=n.value;c.rel="noopener noreferrer",c.target="_blank",c.classList.add("button-link"),c.setAttribute("is","emby-linkbutton"),u.Z.tv&&(c.tabIndex=-1)}}catch(e){o.e(e)}finally{o.f()}}))})),e.addEventListener("viewhide",(function(){d.Z.setTransparentMenu(!1)}))}},99480:function(e,t,r){var n=r(54933),a=r.n(n),i=r(93476),o=r.n(i)()(a());o.push([e.id,".disclaimerContainer{display:-webkit-flex;display:flex;margin-top:2em}.disclaimer{margin:0 auto}.disclaimer h1,.disclaimer h2,.disclaimer h3,.disclaimer h4,.disclaimer h5,.disclaimer h6,.disclaimer p{text-align:center}.disclaimer ol,.disclaimer ul{margin-left:auto;margin-right:auto;max-width:40em;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}",""]),t.Z=o},35075:function(e,t,r){r.r(t);var n=r(1892),a=r.n(n),i=r(95760),o=r.n(i),c=r(38311),l=r.n(c),s=r(58192),u=r.n(s),d=r(38060),v=r.n(d),f=r(54865),m=r.n(f),h=r(99480),g={};g.styleTagTransform=m(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=v(),a()(h.Z,g),t.default=h.Z&&h.Z.locals?h.Z.locals:void 0}}]);