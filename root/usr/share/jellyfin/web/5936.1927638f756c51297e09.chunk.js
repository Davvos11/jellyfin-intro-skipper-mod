"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5936,5282],{55936:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}}),r(23938),r(5769),r(63238),r(61418),r(17460),r(14078);var n,i,a,o=r(90914),s=r(44614),c=r(78695),d=r(70294),l=r(56705),u=r(74227),g=r(28469),m=r(21361),h=r(75282),f=r(47005),v=(r(78066),r(21865),r(45368),r(29490),r(83225),r(6626),r(43734),r(85427),r(53913)),p=r(53218),b=r(9743);function T(){o.default.close(n)}function y(e,t,r,n){l.ZP.show();var i=v.Z.getApiClient(r),a=i.getNewLiveTvTimerDefaults({programId:t}),o=i.getLiveTvProgram(t,i.getCurrentUserId());Promise.all([a,o]).then((function(t){t[0];var r=t[1];!function(e,t,r,n,i){if(!i){var a=function(e,t,r){var n=e.ImageTags||{};return e.PrimaryImageTag&&(n.Primary=e.PrimaryImageTag),n.Primary?t.getScaledImageUrl(e.Id,{type:"Primary",maxHeight:200,tag:e.ImageTags.Primary}):n.Thumb?t.getScaledImageUrl(e.Id,{type:"Thumb",maxHeight:200,tag:e.ImageTags.Thumb}):null}(r,n),o=e.querySelector(".recordingDialog-imageContainer");a?(o.innerHTML='<img src="'.concat(b,'" data-src="').concat(a,'" class="recordingDialog-img lazy" />'),o.classList.remove("hide"),m.default.lazyChildren(o)):(o.innerHTML="",o.classList.add("hide")),e.querySelector(".recordingDialog-itemName").innerText=r.Name,e.querySelector(".formDialogHeaderTitle").innerText=r.Name,e.querySelector(".itemGenres").innerText=(r.Genres||[]).join(" / "),e.querySelector(".itemOverview").innerText=r.Overview||"";var s=e.querySelector(".formDialogFooter"),c=new Date;c>=g.ZP.parseISO8601Date(r.StartDate,!0)&&c<g.ZP.parseISO8601Date(r.EndDate,!0)?s.classList.remove("hide"):s.classList.add("hide"),e.querySelector(".itemMiscInfoPrimary").innerHTML=d.ZP.getPrimaryMediaInfoHtml(r)}e.querySelector(".itemMiscInfoSecondary").innerHTML=d.ZP.getSecondaryMediaInfoHtml(r,{}),l.ZP.hide()}(e,0,r,i,n)}))}var S={show:function(e,t){return new Promise((function(r,d){i=null,l.ZP.show();var g={removeOnClose:!0,scrollY:!1};c.Z.tv?g.size="fullscreen":g.size="small";var m=o.default.createDialog(g);m.classList.add("formDialog"),m.classList.add("recordingDialog");var b,S="";function I(){y(m,e,t,!0)}S+=s.ZP.translateHtml('<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"></h3> </div> <div class="formDialogContent smoothScrollY"> <form class="dialogContentInner dialog-content-centered"> <div class="recordingDetailsContainer"> <div class="recordingDialog-imageContainer"> </div> <div class="recordingDetails"> <h1 class="programDialog-itemName recordingDialog-itemName dialogContentTitle"></h1> <p class="itemMiscInfoPrimary recordingDetailText"></p> <p class="itemMiscInfoSecondary recordingDetailText secondaryText"></p> <p class="itemGenres secondaryText"></p> <div style="margin:.5em 0 1em" class="recordingFields"> </div> </div> </div> <p class="itemOverview"></p> <br/> <div class="formDialogFooter hide"> <button is="emby-button" type="button" class="raised btnPlay block formDialogFooterItem button-submit"> <span>${Play}</span> </button> </div> </form> </div> ',"core"),m.innerHTML=S,n=m,m.addEventListener("close",(function(){f.Events.off(a,"recordingchanged",I),function(e,t,r){if("play"!==e);else{var n=v.Z.getApiClient(r);n.getLiveTvProgram(t,n.getCurrentUserId()).then((function(e){p.O.play({ids:[e.ChannelId],serverId:r})}))}}(i,e,t),a&&a.hasChanged()?r():d()})),c.Z.tv&&u.default.centerFocus.on(m.querySelector(".formDialogContent"),!1),(b=m).querySelector(".btnPlay").addEventListener("click",(function(){i="play",T()})),b.querySelector(".btnCancel").addEventListener("click",(function(){i=null,T()})),y(m,e,t),a=new h.default({parent:m.querySelector(".recordingFields"),programId:e,serverId:t}),f.Events.on(a,"recordingchanged",I),o.default.open(m)}))}}},75282:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}}),r(5769),r(63238),r(61418),r(99785),r(17460),r(14078);var n=r(44614),i=r(47005),a=r(1197),o=r(56705),s=r(83094),c=r(58104),d=(r(78066),r(21865),r(48085),r(15359),r(53913)),l=r(25152);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){var t=e.options,r=d.Z.getApiClient(t.serverId);return t.parent.querySelector(".recordingFields").classList.remove("hide"),r.getLiveTvProgram(t.programId,r.getCurrentUserId()).then((function(r){e.TimerId=r.TimerId,e.Status=r.Status,e.SeriesTimerId=r.SeriesTimerId,function(e,t){t.IsSeries?e.querySelector(".recordSeriesContainer").classList.remove("hide"):e.querySelector(".recordSeriesContainer").classList.add("hide"),t.SeriesTimerId?(e.querySelector(".btnManageSeriesRecording").classList.remove("hide"),e.querySelector(".seriesRecordingButton .recordingIcon").classList.add("recordingIcon-active"),e.querySelector(".seriesRecordingButton .buttonText").innerHTML=n.ZP.translate("CancelSeries")):(e.querySelector(".btnManageSeriesRecording").classList.add("hide"),e.querySelector(".seriesRecordingButton .recordingIcon").classList.remove("recordingIcon-active"),e.querySelector(".seriesRecordingButton .buttonText").innerHTML=n.ZP.translate("RecordSeries")),t.TimerId&&"Cancelled"!==t.Status?(e.querySelector(".btnManageRecording").classList.remove("hide"),e.querySelector(".singleRecordingButton .recordingIcon").classList.add("recordingIcon-active"),"InProgress"===t.Status?e.querySelector(".singleRecordingButton .buttonText").innerHTML=n.ZP.translate("StopRecording"):e.querySelector(".singleRecordingButton .buttonText").innerHTML=n.ZP.translate("DoNotRecord")):(e.querySelector(".btnManageRecording").classList.add("hide"),e.querySelector(".singleRecordingButton .recordingIcon").classList.remove("recordingIcon-active"),e.querySelector(".singleRecordingButton .buttonText").innerHTML=n.ZP.translate("Record"))}(t.parent,r)}))}function m(e,t,r){var n=this.options,i=!1;r.Id&&this.TimerId===r.Id&&(i=!0),r.ProgramId&&n&&n.programId===r.ProgramId&&(i=!0),i&&this.refresh()}function h(e,t,r){var n=this.options,i=!1;r.Id&&this.SeriesTimerId===r.Id&&(i=!0),r.ProgramId&&n&&n.programId===r.ProgramId&&(i=!0),i&&this.refresh()}function f(){var e=this.options;if(this.TimerId&&"Cancelled"!==this.Status){var t=this;r.e(3202).then(r.bind(r,3202)).then((function(r){r.default.show(t.TimerId,e.serverId,{enableCancel:!1}).then((function(){t.changed=!0}))}))}}function v(){var e=this.options;if(this.SeriesTimerId){var t=this;r.e(3940).then(r.bind(r,63940)).then((function(r){r.default.show(t.SeriesTimerId,e.serverId,{enableCancel:!1}).then((function(){t.changed=!0}))}))}}function p(e){this.changed=!0;var t=this,r=this.options,n=d.Z.getApiClient(r.serverId),a=!s.ZP.parentWithTag(e.target,"BUTTON").querySelector(".material-icons").classList.contains("recordingIcon-active"),l=this.TimerId&&"Cancelled"!==this.Status;a?l||(o.ZP.show(),c.default.createRecording(n,r.programId,!1).then((function(){i.Events.trigger(t,"recordingchanged"),g(t),o.ZP.hide()}))):l&&(o.ZP.show(),c.default.cancelTimer(n,this.TimerId,!0).then((function(){i.Events.trigger(t,"recordingchanged"),g(t),o.ZP.hide()})))}function b(e){this.changed=!0;var t=this,r=this.options,i=d.Z.getApiClient(r.serverId);s.ZP.parentWithTag(e.target,"BUTTON").querySelector(".material-icons").classList.contains("recordingIcon-active")?this.SeriesTimerId&&i.cancelLiveTvSeriesTimer(this.SeriesTimerId).then((function(){(0,l.Z)(n.ZP.translate("RecordingCancelled")),g(t)})):(r.parent.querySelector(".recordSeriesContainer").classList.remove("hide"),this.SeriesTimerId||(this.TimerId?c.default.changeRecordingToSeries(i,this.TimerId,r.programId):c.default.createRecording(i,r.programId,!0)).then((function(){g(t)})))}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.embed();var r=m.bind(this);this.timerChangedHandler=r,i.Events.on(a.default,"TimerCreated",r),i.Events.on(a.default,"TimerCancelled",r);var n=h.bind(this);this.seriesTimerChangedHandler=n,i.Events.on(a.default,"SeriesTimerCreated",n),i.Events.on(a.default,"SeriesTimerCancelled",n)}var t,r;return t=e,(r=[{key:"embed",value:function(){var e=this;return new Promise((function(t){var r=e.options.parent;r.innerHTML=n.ZP.translateHtml('<div class="recordingFields hide"> <div class="recordSeriesContainer recordingFields-buttons flex align-items-center hide"> <div> <button is="emby-button" type="button" class="raised recordingButton seriesRecordingButton"> <span class="material-icons recordingIcon fiber_smart_record" aria-hidden="true"></span> <span class="buttonText">${RecordSeries}</span> </button> </div> <button is="emby-button" type="button" class="button-flat secondaryText manageRecordingButton btnManageSeriesRecording hide"> <span class="manageButtonText">${SeriesSettings}</span> </button> </div> <div class="recordingFields-buttons flex align-items-center"> <div> <button is="emby-button" type="button" class="raised recordingButton singleRecordingButton"> <span class="material-icons recordingIcon fiber_manual_record" aria-hidden="true"></span> <span class="buttonText">${Record}</span> </button> </div> <button is="emby-button" type="button" class="button-flat secondaryText manageRecordingButton btnManageRecording hide"> <span class="manageButtonText">${Settings}</span> </button> </div> </div> ',"core"),r.querySelector(".singleRecordingButton").addEventListener("click",p.bind(e)),r.querySelector(".seriesRecordingButton").addEventListener("click",b.bind(e)),r.querySelector(".btnManageRecording").addEventListener("click",f.bind(e)),r.querySelector(".btnManageSeriesRecording").addEventListener("click",v.bind(e)),g(e).then(t)}))}},{key:"hasChanged",value:function(){return this.changed}},{key:"refresh",value:function(){g(this)}},{key:"destroy",value:function(){var e=this.timerChangedHandler;this.timerChangedHandler=null,i.Events.off(a.default,"TimerCreated",e),i.Events.off(a.default,"TimerCancelled",e);var t=this.seriesTimerChangedHandler;this.seriesTimerChangedHandler=null,i.Events.off(a.default,"SeriesTimerCreated",t),i.Events.off(a.default,"SeriesTimerCancelled",t)}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},47249:function(e,t,r){var n=r(54933),i=r.n(n),a=r(93476),o=r.n(a)()(i());o.push([e.id,".recordingDialog-imageContainer{-webkit-flex-shrink:0;flex-shrink:0;padding:1em 1em 1em 0;width:25%}.recordingDialog-img{width:100%}.recordingDialog-itemName{margin-top:.7em}.recordingDetailsContainer{display:-webkit-flex;display:flex}.recordingDetails{-webkit-flex-grow:1;flex-grow:1}.recordingDetailText{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}",""]),t.Z=o},7547:function(e,t,r){var n=r(54933),i=r.n(n),a=r(93476),o=r.n(a)()(i());o.push([e.id,".recordingButton{margin-left:0;min-width:10em}.recordingIcon-active{color:#c33}.recordSeriesContainer{margin-bottom:.8em}",""]),t.Z=o},43734:function(e,t,r){var n=r(1892),i=r.n(n),a=r(95760),o=r.n(a),s=r(38311),c=r.n(s),d=r(58192),l=r.n(d),u=r(38060),g=r.n(u),m=r(54865),h=r.n(m),f=r(47249),v={};v.styleTagTransform=h(),v.setAttributes=l(),v.insert=c().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=g(),i()(f.Z,v),f.Z&&f.Z.locals&&f.Z.locals},48085:function(e,t,r){var n=r(1892),i=r.n(n),a=r(95760),o=r.n(a),s=r(38311),c=r.n(s),d=r(58192),l=r.n(d),u=r(38060),g=r.n(u),m=r(54865),h=r.n(m),f=r(7547),v={};v.styleTagTransform=h(),v.setAttributes=l(),v.insert=c().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=g(),i()(f.Z,v),f.Z&&f.Z.locals&&f.Z.locals},9743:function(e,t,r){e.exports=r.p+"6de874568a98308c4a74.png"}}]);