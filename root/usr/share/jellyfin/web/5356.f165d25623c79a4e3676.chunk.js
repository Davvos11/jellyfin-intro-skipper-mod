"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5356],{25356:function(e,t,a){a.r(t),a.d(t,{default:function(){return D},show:function(){return B}}),a(52077),a(1203),a(90938),a(63238),a(61418);var o=a(90914),i=a(83094),n=a(56705),r=a(74227),l=a(78695),s=a(44614),d=(a(78066),a(20716),a(6626),a(1892)),u=a.n(d),c=a(95760),p=a.n(c),m=a(38311),f=a.n(m),g=a(58192),v=a.n(g),h=a(38060),y=a.n(h),b=a(54865),Z=a.n(b),I=a(14830),w={};w.styleTagTransform=Z(),w.setAttributes=v(),w.insert=f().bind(null,"head"),w.domAPI=p(),w.insertStyleElement=y(),u()(I.Z,w),I.Z&&I.Z.locals&&I.Z.locals;var S,T,L,$=a(53913),k=a(25152),P=!1;function x(e){switch(n.ZP.hide(),e.target.error.code){case e.target.error.NOT_FOUND_ERR:(0,k.Z)(s.ZP.translate("MessageFileReadError"));break;case e.target.error.ABORT_ERR:break;default:(0,k.Z)(s.ZP.translate("MessageFileReadError"))}}function q(e){var t=L;if(!t)return!1;if(!t.type.startsWith("image/"))return(0,k.Z)(s.ZP.translate("MessageImageFileTypeAllowed")),e.preventDefault(),!1;n.ZP.show();var a=i.ZP.parentWithClass(this,"dialog"),r=a.querySelector("#selectImageType").value;return"None"===r?((0,k.Z)(s.ZP.translate("MessageImageTypeNotSelected")),e.preventDefault(),!1):($.Z.getApiClient(T).uploadItemImage(S,r,t).then((function(){a.querySelector("#uploadImage").value="",n.ZP.hide(),P=!0,o.default.close(a)})),e.preventDefault(),!1)}function B(e){return new Promise((function(t){P=!1,function(e,t){S=(e=e||{}).itemId,T=e.serverId;var a={removeOnClose:!0};l.Z.tv?a.size="fullscreen":a.size="small";var i,d=o.default.createDialog(a);d.classList.add("formDialog"),d.innerHTML=s.ZP.translateHtml('<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"> ${HeaderUploadImage} </h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner"> <form class="uploadItemImageForm" style="max-width:100%"> <div class="flex align-items-center" style="margin:1.5em 0"> <h2 style="margin:0">${HeaderAddUpdateImage}</h2> <button is="emby-button" type="button" class="raised raised-mini btnBrowse" style="margin-left:1.5em"> <span class="material-icons folder" aria-hidden="true"></span> <span>${Browse}</span> </button> </div> <div> <div class="imageEditor-dropZone fieldDescription"> <div id="dropImageText">${LabelDropImageHere}</div> <output id="imageOutput" class="flex align-items-center justify-content-center" style="position:absolute;top:0;left:0;right:0;bottom:0;width:100%"></output> <input type="file" accept="image/*" id="uploadImage" name="uploadImage" style="position:absolute;top:0;left:0;right:0;bottom:0;width:100%;opacity:0"/> </div> <div id="fldUpload" class="hide"> <br/> <div class="selectContainer"> <select is="emby-select" id="selectImageType" name="selectImageType" label="${LabelImageType}"> <option value="None"></option> <option value="Primary">${Primary}</option> <option value="Art">${Art}</option> <option value="Backdrop">${Backdrop}</option> <option value="Banner">${Banner}</option> <option value="Box">${Box}</option> <option value="BoxRear">${BoxRear}</option> <option value="Disc">${Disc}</option> <option value="Logo">${Logo}</option> <option value="Menu">${Menu}</option> <option value="Screenshot">${Screenshot}</option> <option value="Thumb">${Thumb}</option> </select> </div> <button is="emby-button" type="submit" class="raised button-submit block"> <span>${Upload}</span> </button> </div> </div> </form> </div> </div> ',"core"),l.Z.tv&&r.default.centerFocus.on(d,!1),d.addEventListener("close",(function(){l.Z.tv&&r.default.centerFocus.off(d,!1),n.ZP.hide(),t(P)})),o.default.open(d),(i=d).querySelector("form").addEventListener("submit",q),i.querySelector("#uploadImage").addEventListener("change",(function(){!function(e,t){var a=t[0];if(!a||!a.type.match("image.*"))return e.querySelector("#imageOutput").innerHTML="",e.querySelector("#fldUpload").classList.add("hide"),void(L=null);L=a;var o,i=new FileReader;i.onerror=x,i.onloadstart=function(){e.querySelector("#fldUpload").classList.add("hide")},i.onabort=function(){n.ZP.hide(),console.debug("File read cancelled")},i.onload=(o=a,function(t){var a=['<img style="max-width:100%;max-height:100%;" src="',t.target.result,'" title="',escape(o.name),'"/>'].join("");e.querySelector("#imageOutput").innerHTML=a,e.querySelector("#dropImageText").classList.add("hide"),e.querySelector("#fldUpload").classList.remove("hide")}),i.readAsDataURL(a)}(i,this.files)})),i.querySelector(".btnBrowse").addEventListener("click",(function(){i.querySelector("#uploadImage").click()})),d.querySelector("#selectImageType").value=e.imageType||"Primary",d.querySelector(".btnCancel").addEventListener("click",(function(){o.default.close(d)}))}(e,t)}))}var D={show:B}},14830:function(e,t,a){var o=a(54933),i=a.n(o),n=a(93476),r=a.n(n)()(i());r.push([e.id,".imageEditor-dropZone{-webkit-align-items:center;align-items:center;border:.2em dashed;border-radius:.25em;display:-webkit-flex;display:flex;height:12em;-webkit-justify-content:center;justify-content:center;position:relative;text-align:center}",""]),t.Z=r}}]);