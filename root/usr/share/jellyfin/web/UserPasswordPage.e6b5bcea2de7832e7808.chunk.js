/*! For license information please see UserPasswordPage.e6b5bcea2de7832e7808.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1],{71426:function(e,t,n){n(62525);var r=n(27378),a=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var s=Symbol.for;a=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l=Object.prototype.hasOwnProperty,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!i.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.jsx=c,t.jsxs=c},24246:function(e,t,n){e.exports=n(71426)},4007:function(e,t,n){var r=n(24246),a=n(44614),s=function(e){var t=e.type,n=e.className,r=e.title;return{__html:'<button\n        is="emby-button"\n        type="'.concat(t,'"\n        class="').concat(n,'"\n        >\n        <span>').concat(r,"</span>\n    </button>")}};t.Z=function(e){var t=e.type,n=e.className,o=e.title;return(0,r.jsx)("div",{dangerouslySetInnerHTML:s({type:t,className:n,title:a.ZP.translate(o)})})}},89663:function(e,t,n){var r=n(24246),a=n(44614),s=function(e){var t=e.labelClassName,n=e.type,r=e.className,a=e.title;return{__html:'<label class="'.concat(t,'">\n        <input\n            is="emby-checkbox"\n            type="').concat(n,'"\n            class="').concat(r,'"\n        />\n        <span>').concat(a,"</span>\n    </label>")}};t.Z=function(e){var t=e.labelClassName,n=e.type,o=e.className,l=e.title;return(0,r.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:s({labelClassName:t||"",type:n,className:o,title:a.ZP.translate(l)})})}},26670:function(e,t,n){var r=n(24246),a=n(44614),s=function(e){var t=e.type,n=e.id,r=e.label,a=e.options;return{__html:'<input\n        is="emby-input"\n        type="'.concat(t,'"\n        id="').concat(n,'"\n        label="').concat(r,'"\n        ').concat(a,"\n    />")}};t.Z=function(e){var t=e.type,n=e.id,o=e.label,l=e.options;return(0,r.jsx)("div",{dangerouslySetInnerHTML:s({type:t,id:n,label:a.ZP.translate(o),options:l||""})})}},44243:function(e,t,n){var r=n(24246),a=n(44614),s=function(e){return{__html:'<a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="'.concat("useredit"===e?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'useredit.html\', true);">\n        ').concat(a.ZP.translate("Profile"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userlibraryaccess"===e?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userlibraryaccess.html\', true);">\n        ').concat(a.ZP.translate("TabAccess"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userparentalcontrol"===e?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userparentalcontrol.html\', true);">\n        ').concat(a.ZP.translate("TabParentalControl"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userpassword"===e?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userpassword.html\', true);">\n        ').concat(a.ZP.translate("HeaderPassword"),"\n    </a>")}};t.Z=function(e){var t=e.activeTab;return(0,r.jsx)("div",{"data-role":"controlgroup","data-type":"horizontal",className:"localnav",dangerouslySetInnerHTML:s(t)})}},45754:function(e,t,n){var r=n(24246),a=n(44614),s=function(e){var t=e.className,n=e.title,r=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(t,'"\n        target="_blank"\n        href="').concat(r,'"\n        >\n        ').concat(n,"\n    </a>")}};t.Z=function(e){var t=e.className,n=e.title,o=e.url;return(0,r.jsx)("div",{dangerouslySetInnerHTML:s({className:t,title:a.ZP.translate(n),href:o})})}},42363:function(e,t,n){var r=n(24246),a=n(27378),s=n(76543),o=n(44614),l=n(3319),i=n(56346),c=n(56705),d=n(25152),u=n(4007),f=n(89663),p=n(26670),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)};t.Z=function(e){var t=e.userId,y=(0,a.useRef)(null),b=(0,a.useCallback)((function(){var e=y.current;e?(window.ApiClient.getUser(t).then((function(t){s.ZP.getCurrentUser().then((function(r){var a,s;if(!t.Policy)throw new Error("Unexpected null user.Policy");if(!t.Configuration)throw new Error("Unexpected null user.Configuration");l.Z.setTitle(t.Name);var o=!1;t.HasConfiguredPassword?(e.querySelector(".btnResetPassword").classList.remove("hide"),e.querySelector("#fldCurrentPassword").classList.remove("hide"),o=!0):(e.querySelector(".btnResetPassword").classList.add("hide"),e.querySelector("#fldCurrentPassword").classList.add("hide")),(null===(a=null==r?void 0:r.Policy)||void 0===a?void 0:a.IsAdministrator)||t.Policy.EnableUserPreferenceAccess?e.querySelector(".passwordSection").classList.remove("hide"):e.querySelector(".passwordSection").classList.add("hide"),o&&((null===(s=null==r?void 0:r.Policy)||void 0===s?void 0:s.IsAdministrator)||t.Policy.EnableUserPreferenceAccess)?e.querySelector(".localAccessSection").classList.remove("hide"):e.querySelector(".localAccessSection").classList.add("hide");var i=e.querySelector("#txtEasyPassword");i.value="",t.HasConfiguredEasyPassword?(i.placeholder="******",e.querySelector(".btnResetEasyPassword").classList.remove("hide")):(i.removeAttribute("placeholder"),i.placeholder="",e.querySelector(".btnResetEasyPassword").classList.add("hide")),e.querySelector(".chkEnableLocalEasyPassword").checked=t.Configuration.EnableLocalPassword||!1,Promise.resolve().then(n.bind(n,6610)).then((function(t){t.default.autoFocus(e)}))}))})),e.querySelector("#txtCurrentPassword").value="",e.querySelector("#txtNewPassword").value="",e.querySelector("#txtNewPasswordConfirm").value=""):console.error("Unexpected null reference")}),[t]);return(0,a.useEffect)((function(){var e=y.current;if(e){b();var n=function(){window.ApiClient.getUser(t).then((function(t){if(!t.Configuration)throw new Error("Unexpected null user.Configuration");if(!t.Id)throw new Error("Unexpected null user.Id");t.Configuration.EnableLocalPassword=e.querySelector(".chkEnableLocalEasyPassword").checked,window.ApiClient.updateUserConfiguration(t.Id,t.Configuration).then((function(){c.ZP.hide(),(0,d.Z)(o.ZP.translate("SettingsSaved")),b()}))}))};e.querySelector(".updatePasswordForm").addEventListener("submit",(function(n){return e.querySelector("#txtNewPassword").value!=e.querySelector("#txtNewPasswordConfirm").value?(0,d.Z)(o.ZP.translate("PasswordMatchError")):(c.ZP.show(),r=e.querySelector("#txtCurrentPassword").value,a=e.querySelector("#txtNewPassword").value,e.querySelector("#fldCurrentPassword").classList.contains("hide")&&(r=""),window.ApiClient.updateUserPassword(t,r,a).then((function(){c.ZP.hide(),(0,d.Z)(o.ZP.translate("PasswordSaved")),b()}),(function(){c.ZP.hide(),s.ZP.alert({title:o.ZP.translate("HeaderLoginFailure"),message:o.ZP.translate("MessageInvalidUser")})}))),n.preventDefault(),!1;var r,a})),e.querySelector(".localAccessForm").addEventListener("submit",(function(r){return c.ZP.show(),(a=e.querySelector("#txtEasyPassword").value)?window.ApiClient.updateEasyPassword(t,a).then((function(){n()})):n(),r.preventDefault(),!1;var a})),e.querySelector(".btnResetEasyPassword").addEventListener("click",(function(){var e=o.ZP.translate("PinCodeResetConfirmation");(0,i.Z)(e,o.ZP.translate("HeaderPinCodeReset")).then((function(){c.ZP.show(),window.ApiClient.resetEasyPassword(t).then((function(){c.ZP.hide(),s.ZP.alert({message:o.ZP.translate("PinCodeResetComplete"),title:o.ZP.translate("HeaderPinCodeReset")}),b()}))}))})),e.querySelector(".btnResetPassword").addEventListener("click",(function(){var e=o.ZP.translate("PasswordResetConfirmation");(0,i.Z)(e,o.ZP.translate("ResetPassword")).then((function(){c.ZP.show(),window.ApiClient.resetUserPassword(t).then((function(){c.ZP.hide(),s.ZP.alert({message:o.ZP.translate("PasswordResetComplete"),title:o.ZP.translate("ResetPassword")}),b()}))}))}))}else console.error("Unexpected null reference")}),[b,t]),(0,r.jsxs)("div",h({ref:y},{children:[(0,r.jsx)("form",h({className:"updatePasswordForm passwordSection hide",style:{margin:"0 auto 2em"}},{children:(0,r.jsxs)("div",h({className:"detailSection"},{children:[(0,r.jsx)("div",h({id:"fldCurrentPassword",className:"inputContainer hide"},{children:(0,r.jsx)(p.Z,{type:"password",id:"txtCurrentPassword",label:"LabelCurrentPassword",options:'autoComplete="off"'})})),(0,r.jsx)("div",h({className:"inputContainer"},{children:(0,r.jsx)(p.Z,{type:"password",id:"txtNewPassword",label:"LabelNewPassword",options:'autoComplete="off"'})})),(0,r.jsx)("div",h({className:"inputContainer"},{children:(0,r.jsx)(p.Z,{type:"password",id:"txtNewPasswordConfirm",label:"LabelNewPasswordConfirm",options:'autoComplete="off"'})})),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Z,{type:"submit",className:"raised button-submit block",title:"Save"}),(0,r.jsx)(u.Z,{type:"button",className:"raised btnResetPassword button-cancel block hide",title:"ResetPassword"})]})]}))})),(0,r.jsx)("br",{}),(0,r.jsx)("form",h({className:"localAccessForm localAccessSection",style:{margin:"0 auto"}},{children:(0,r.jsxs)("div",h({className:"detailSection"},{children:[(0,r.jsx)("div",h({className:"detailSectionHeader"},{children:o.ZP.translate("HeaderEasyPinCode")})),(0,r.jsx)("br",{}),(0,r.jsx)("div",{children:o.ZP.translate("EasyPasswordHelp")}),(0,r.jsx)("br",{}),(0,r.jsx)("div",h({className:"inputContainer"},{children:(0,r.jsx)(p.Z,{type:"number",id:"txtEasyPassword",label:"LabelEasyPinCode",options:'autoComplete="off" pattern="[0-9]*" step="1" maxlength="5"'})})),(0,r.jsx)("br",{}),(0,r.jsxs)("div",h({className:"checkboxContainer checkboxContainer-withDescription"},{children:[(0,r.jsx)(f.Z,{type:"checkbox",className:"chkEnableLocalEasyPassword",title:"LabelInNetworkSignInWithEasyPassword"}),(0,r.jsx)("div",h({className:"fieldDescription checkboxFieldDescription"},{children:o.ZP.translate("LabelInNetworkSignInWithEasyPasswordHelp")}))]})),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Z,{type:"submit",className:"raised button-submit block",title:"Save"}),(0,r.jsx)(u.Z,{type:"button",className:"raised btnResetEasyPassword button-cancel block hide",title:"ButtonResetEasyPassword"})]})]}))}))]}))}},99648:function(e,t,n){n.r(t);var r=n(24246),a=n(27378),s=n(86628),o=n(45754),l=n(44243),i=n(42363),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)};t.default=function(){var e=s.appRouter.param("userId"),t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return o}((0,a.useState)(""),2),n=t[0],d=t[1],u=(0,a.useCallback)((function(){window.ApiClient.getUser(e).then((function(e){if(!e.Name)throw new Error("Unexpected null user.Name");d(e.Name)}))}),[e]);return(0,a.useEffect)((function(){u()}),[u]),(0,r.jsx)("div",{children:(0,r.jsxs)("div",c({className:"content-primary"},{children:[(0,r.jsx)("div",c({className:"verticalSection"},{children:(0,r.jsxs)("div",c({className:"sectionTitleContainer flex align-items-center"},{children:[(0,r.jsx)("h2",c({className:"sectionTitle username"},{children:n})),(0,r.jsx)(o.Z,{className:"raised button-alt headerHelpButton",title:"Help",url:"https://docs.jellyfin.org/general/server/users/"})]}))})),(0,r.jsx)(l.Z,{activeTab:"userpassword"}),(0,r.jsx)("div",c({className:"readOnlyContent"},{children:(0,r.jsx)(i.Z,{userId:e})}))]}))})}}}]);