"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7515],{92780:function(e,t,a){a(23938),a(61013),a(32081),a(98010),a(63238),a(40895),a(99785);var n=a(65009),s=a.n(n),r=a(47005),i=a(44614),o=a(83094),l=a(84727),d=a(9785),c=a(1197),g=(a(78066),a(664),a(53913)),u=a(61642);function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,a,n,r){null==n&&(n=parseInt(t.getAttribute("data-activitystartindex")||"0")),r=r||parseInt(t.getAttribute("data-activitylimit")||"7");var c=new Date,g="false"!==t.getAttribute("data-useractivity");g?c.setTime(c.getTime()-864e5):c.setTime(c.getTime()-6048e5),ApiClient.getJSON(ApiClient.getUrl("System/ActivityLog/Entries",{startIndex:n,limit:r,minDate:c.toISOString(),hasUserId:g})).then((function(c){if(t.setAttribute("data-activitystartindex",n),t.setAttribute("data-activitylimit",r),!n){var g=o.ZP.parentWithClass(t,"activityContainer");g&&(c.Items.length?g.classList.remove("hide"):g.classList.add("hide"))}e.items=c.Items,function(e,t,a){e.innerHTML=a.Items.map((function(e){return function(e,t){var a="";a+='<div class="listItem listItem-border">';var n="#00a4dc",r="notifications";return"Error"!=e.Severity&&"Fatal"!=e.Severity&&"Warn"!=e.Severity||(n="#cc0000",r="notification_important"),e.UserId&&e.UserPrimaryImageTag?a+='<span class="listItemIcon material-icons dvr" aria-hidden="true" style="width:2em!important;height:2em!important;padding:0;color:transparent;background-color:'+n+";background-image:url('"+t.getUserImageUrl(e.UserId,{type:"Primary",tag:e.UserPrimaryImageTag})+"');background-repeat:no-repeat;background-position:center center;background-size: cover;\"></span>":a+='<span class="listItemIcon material-icons '+r+'" aria-hidden="true" style="background-color:'+n+'"></span>',a+='<div class="listItemBody three-line">',a+='<div class="listItemBodyText">',a+=s()(e.Name),a+="</div>",a+='<div class="listItemBodyText secondary">',a+=l.Z(Date.parse(e.Date),Date.parse(new Date),{locale:d.ZP.getLocale()}),a+="</div>",a+='<div class="listItemBodyText secondary listItemBodyText-nowrap">',a+=s()(e.ShortOverview||""),a+="</div>",a+="</div>",e.Overview&&(a+='<button type="button" is="paper-icon-button-light" class="btnEntryInfo" data-id="'.concat(e.Id,'" title="').concat(i.ZP.translate("Info"),'">\n                       <span class="material-icons info" aria-hidden="true"></span>\n                    </button>')),a+"</div>"}(e,t)})).join("")}(t,a,c)}))}function v(e,t){var a=this.options;a&&a.serverId===t.serverId()&&p(this,a.element,t)}function h(e){var t=o.ZP.parentWithClass(e.target,"btnEntryInfo");if(t){var a=t.getAttribute("data-id"),n=this.items;if(n){var s=n.filter((function(e){return e.Id.toString()===a}))[0];s&&function(e){(0,u.Z)({text:e.Overview})}(s)}}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t;var a=t.element;a.classList.add("activityLogListWidget"),a.addEventListener("click",h.bind(this));var n=g.Z.getApiClient(t.serverId);p(this,a,n);var s=v.bind(this);this.updateFn=s,r.Events.on(c.default,"ActivityLogEntry",s),n.sendMessage("ActivityLogEntryStart","0,1500")}var t,a;return t=e,(a=[{key:"destroy",value:function(){var e=this.options;e&&(e.element.classList.remove("activityLogListWidget"),g.Z.getApiClient(e.serverId).sendMessage("ActivityLogEntryStop","0,1500"));var t=this.updateFn;t&&r.Events.off(c.default,"ActivityLogEntry",t),this.items=null,this.options=null}}])&&m(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Z=y},10480:function(e,t,a){t.Z={getDisplayPlayMethod:function(e){return e.NowPlayingItem?e.TranscodingInfo&&e.TranscodingInfo.IsVideoDirect&&e.TranscodingInfo.IsAudioDirect?"Remux":e.TranscodingInfo&&e.TranscodingInfo.IsVideoDirect?"DirectStream":"Transcode"===e.PlayState.PlayMethod?"Transcode":"DirectStream"===e.PlayState.PlayMethod||"DirectPlay"===e.PlayState.PlayMethod?"DirectPlay":void 0:null}}},9899:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}}),a(5769),a(63238),a(55849),a(61418),a(17460),a(14078),a(98010),a(76056),a(27471),a(23938);var n=a(65009),s=a.n(n),r=a(28469),i=a(47005),o=a(71616),l=a(1197),d=a(83094),c=a(44614),g=a(64258),u=a(9785),m=a(56705),p=a(10480),v=a(61097),h=a(21361),y=a(92780),P=a(7816),f=a(61160),S=(a(664),a(78066),a(15359),a(32420),a(30504)),I=a(76543),b=a(53913),T=a(61642),Z=a(56346);function C(e,t){var a,n=[],s=p.Z.getDisplayPlayMethod(t);"Remux"===s?(a=c.ZP.translate("Remuxing"),n.push(c.ZP.translate("RemuxHelp1")),n.push("<br/>"),n.push(c.ZP.translate("RemuxHelp2"))):"DirectStream"===s?(a=c.ZP.translate("DirectStreaming"),n.push(c.ZP.translate("DirectStreamHelp1")),n.push("<br/>"),n.push(c.ZP.translate("DirectStreamHelp2"))):"DirectPlay"===s?(a=c.ZP.translate("DirectPlaying"),n.push(c.ZP.translate("DirectPlayHelp"))):"Transcode"===s&&(a=c.ZP.translate("Transcoding"),n.push(c.ZP.translate("MediaIsBeingConverted")),n.push(DashboardPage.getSessionNowPlayingStreamInfo(t)),t.TranscodingInfo&&t.TranscodingInfo.TranscodeReasons&&t.TranscodingInfo.TranscodeReasons.length&&(n.push("<br/>"),n.push(c.ZP.translate("LabelReasonForTranscoding")),t.TranscodingInfo.TranscodeReasons.forEach((function(e){n.push(c.ZP.translate(e))})))),(0,T.Z)({text:n.join("<br/>"),title:a})}function L(e,t){a.e(8e3).then(a.bind(a,58e3)).then((function(e){(0,e.default)({title:c.ZP.translate("HeaderSendMessage"),label:c.ZP.translate("LabelMessageText"),confirmText:c.ZP.translate("ButtonSend")}).then((function(e){e&&b.Z.getApiClient(t.ServerId).sendMessageCommand(t.Id,{Text:e,TimeoutMs:5e3})}))}))}function k(e){var t=d.ZP.parentWithClass(e.target,"sessionCardButton");if(t){var n=d.ZP.parentWithClass(t,"card");if(n){var s=n.id,r=(DashboardPage.sessionsList||[]).filter((function(e){return"session"+e.Id===s}))[0];r&&(t.classList.contains("btnCardOptions")?function(e,t){Promise.resolve().then(a.bind(a,78407)).then((function(a){var n=a.default,s=[];return t.ServerId&&t.DeviceId!==b.Z.deviceId()&&s.push({name:c.ZP.translate("SendMessage"),id:"sendmessage"}),t.TranscodingInfo&&t.TranscodingInfo.TranscodeReasons&&t.TranscodingInfo.TranscodeReasons.length&&s.push({name:c.ZP.translate("ViewPlaybackInfo"),id:"transcodinginfo"}),n.show({items:s,positionTo:e}).then((function(e){switch(e){case"sendmessage":L(0,t);break;case"transcodinginfo":C(0,t)}}))}))}(t,r):t.classList.contains("btnSessionInfo")?C(0,r):t.classList.contains("btnSessionSendMessage")?L(0,r):t.classList.contains("btnSessionStop")?b.Z.getApiClient(r.ServerId).sendPlayStateCommand(r.Id,"Stop"):t.classList.contains("btnSessionPlayPause")&&r.PlayState&&b.Z.getApiClient(r.ServerId).sendPlayStateCommand(r.Id,"PlayPause"))}}}function A(e,t){t.getSystemInfo().then((function(t){e.querySelector("#serverName").innerText=c.ZP.translate("DashboardServerName",t.ServerName),e.querySelector("#versionNumber").innerText=c.ZP.translate("DashboardVersionNumber",t.Version),e.querySelector("#operatingSystem").innerText=c.ZP.translate("DashboardOperatingSystem",t.OperatingSystem),e.querySelector("#architecture").innerText=c.ZP.translate("DashboardArchitecture",t.SystemArchitecture),t.CanSelfRestart?e.querySelector("#btnRestartServer").classList.remove("hide"):e.querySelector("#btnRestartServer").classList.add("hide"),e.querySelector("#cachePath").innerText=t.CachePath,e.querySelector("#logPath").innerText=t.LogPath,e.querySelector("#transcodePath").innerText=t.TranscodingTempPath,e.querySelector("#metadataPath").innerText=t.InternalMetadataPath,e.querySelector("#webPath").innerText=t.WebPath}))}function w(e,t){(function(e,t){var a="";DashboardPage.sessionsList=t;var n=e.querySelector(".activeDevices"),r=n.querySelector(".card");r&&r.classList.add("deadSession");for(var i=0,o=t.length;i<o;i++){var l=t[i],d="session"+l.Id,g=e.querySelector("#"+d);if(g)DashboardPage.updateSession(g,l);else{var u,m,p,h=l.NowPlayingItem,y=DashboardPage.getNowPlayingImageUrl(h);a+='<div class="scalableCard card activeSession backdropCard backdropCard-scalable" id="'+d+'">',a+='<div class="cardBox visualCardBox">',a+='<div class="cardScalable visualCardBox-cardScalable">',a+='<div class="cardPadder cardPadder-backdrop"></div>',a+='<div class="cardContent '.concat(v.default.getDefaultBackgroundClass(),'">'),y?(a+='<div class="sessionNowPlayingContent sessionNowPlayingContent-withbackground"',a+=' data-src="'+y+'" style="display:inline-block;background-image:url(\''+y+"');\"></div>"):a+='<div class="sessionNowPlayingContent"></div>',a+='<div class="sessionNowPlayingInnerContent '.concat(y?"darkenContent":"",'">'),a+='<div class="sessionAppInfo">';var P=DashboardPage.getClientImage(l);P&&(a+=P),a+='<div class="sessionAppName" style="display:inline-block;">',a+='<div class="sessionDeviceName">'+s()(l.DeviceName)+"</div>",a+='<div class="sessionAppSecondaryText">'+s()(DashboardPage.getAppSecondaryText(l))+"</div>",a+="</div>",a+="</div>",a+='<div class="sessionNowPlayingDetails">';var S=DashboardPage.getNowPlayingName(l);a+='<div class="sessionNowPlayingInfo" data-imgsrc="'+S.image+'">',a+=S.html,a+="</div>",a+='<div class="sessionNowPlayingTime">'+s()(DashboardPage.getSessionNowPlayingTime(l))+"</div>",a+="</div>";var I=100*(null==l||null===(u=l.PlayState)||void 0===u?void 0:u.PositionTicks)/(null==h?void 0:h.RunTimeTicks);a+=f.ZP.getProgressHtml(I||0,{containerClass:"playbackProgress"}),I=null==l||null===(m=l.TranscodingInfo)||void 0===m||null===(p=m.CompletionPercentage)||void 0===p?void 0:p.toFixed(1),a+=f.ZP.getProgressHtml(I||0,{containerClass:"transcodingProgress"}),a+=f.ZP.getProgressHtml(100,{containerClass:"backgroundProgress"}),a+="</div>",a+="</div>",a+="</div>",a+='<div class="sessionCardFooter cardFooter">',a+='<div class="sessionCardButtons flex align-items-center justify-content-center">';var T=l.ServerId&&l.NowPlayingItem&&l.SupportsRemoteControl?"":" hide";a+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionPlayPause paper-icon-button-light '+T+'"><span class="material-icons '+(l.PlayState.IsPaused?"pause":"play_arrow")+'" aria-hidden="true"></span></button>',a+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionStop paper-icon-button-light '+T+'"><span class="material-icons stop" aria-hidden="true"></span></button>',a+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionInfo paper-icon-button-light '+T+'" title="'+c.ZP.translate("ViewPlaybackInfo")+'"><span class="material-icons info" aria-hidden="true"></span></button>',a+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionSendMessage paper-icon-button-light '+(T=l.ServerId&&-1!==l.SupportedCommands.indexOf("DisplayMessage")&&l.DeviceId!==b.Z.deviceId()?"":" hide")+'" title="'+c.ZP.translate("SendMessage")+'"><span class="material-icons message" aria-hidden="true"></span></button>',a+="</div>",a+='<div class="flex align-items-center justify-content-center">';var Z=DashboardPage.getUserImage(l);a+=Z?'<div class="activitylogUserPhoto" style="background-image:url(\''+Z+"');\"></div>":'<div style="height:1.71em;"></div>',a+='<div class="sessionUserName">',a+=DashboardPage.getUsersHtml(l),a+="</div>",a+="</div>",a+="</div>",a+="</div>",a+="</div>"}}n.insertAdjacentHTML("beforeend",a);var C=n.querySelector(".deadSession");C&&C.parentNode.removeChild(C)})(e,t=function(e){for(var t=[],a=(new Date).getTime()-9e5,n=0,s=e.length;n<s;n++){var i=e[n];(i.NowPlayingItem||i.UserId)&&r.ZP.parseISO8601Date(i.LastActivityDate,!0).getTime()>=a&&t.push(i)}return t}(t)),m.ZP.hide()}function x(e,t){t.getSessions({ActiveWithinSeconds:960}).then((function(t){w(e,t)})),t.getScheduledTasks().then((function(t){D(e,t)}))}function D(e,t){var a="";t=t.filter((function(e){return"Idle"!=e.State&&!e.IsHidden})),t.length?e.querySelector(".runningTasksContainer").classList.remove("hide"):e.querySelector(".runningTasksContainer").classList.add("hide");for(var n=0,s=t.length;n<s;n++){var r=t[n];if(a+="<p>",a+=r.Name+"<br/>","Running"===r.State){var i=(r.CurrentProgressPercentage||0).toFixed(1);a+='<progress max="100" value="'+i+'" title="'+i+'%">',a+=i+"%",a+="</progress>",a+="<span style='color:#00a4dc;margin-left:5px;margin-right:5px;'>"+i+"%</span>",a+='<button type="button" is="paper-icon-button-light" title="'+c.ZP.translate("ButtonStop")+'" onclick="DashboardPage.stopTask(this, \''+r.Id+'\');" class="autoSize"><span class="material-icons cancel" aria-hidden="true"></span></button>'}else"Cancelling"===r.State&&(a+='<span style="color:#cc0000;">'+c.ZP.translate("LabelStopping")+"</span>");a+="</p>"}e.querySelector("#divRunningTasks").innerHTML=a}function N(e){function t(e,t){console.debug("onRestartRequired not implemented",e,t)}function a(e,t){console.debug("onServerShuttingDown not implemented",e,t)}function n(e,t){console.debug("onServerRestarting not implemented",e,t)}function s(t,a){a.serverId()===c&&(x(e,a),A(e,a))}function r(t,a){a.serverId()===c&&(x(e,a),A(e,a))}function o(t,a,n){a.serverId()===c&&w(e,n)}function d(t,a,n){a.serverId()===c&&D(e,n)}var c=ApiClient.serverId();e.querySelector(".activeDevices").addEventListener("click",k),e.addEventListener("viewshow",(function(){var c=this,g=ApiClient;g&&(m.ZP.show(),x(c,g),DashboardPage.startInterval(g),i.Events.on(l.default,"RestartRequired",t),i.Events.on(l.default,"ServerShuttingDown",a),i.Events.on(l.default,"ServerRestarting",n),i.Events.on(l.default,"PackageInstalling",s),i.Events.on(l.default,"PackageInstallationCompleted",r),i.Events.on(l.default,"Sessions",o),i.Events.on(l.default,"ScheduledTasksInfo",d),DashboardPage.lastAppUpdateCheck=null,A(c,ApiClient),c.userActivityLog||(c.userActivityLog=new y.Z({serverId:ApiClient.serverId(),element:c.querySelector(".userActivityItems")})),ApiClient.isMinServerVersion("3.4.1.25")&&(c.serverActivityLog||(c.serverActivityLog=new y.Z({serverId:ApiClient.serverId(),element:c.querySelector(".serverActivityItems")}))),function(e,t){t.getLiveTvRecordings({UserId:I.ZP.getCurrentUserId(),IsInProgress:!0,Fields:"CanDelete,PrimaryImageAspectRatio",EnableTotalRecordCount:!1,EnableImageTypes:"Primary,Thumb,Backdrop"}).then((function(t){var a=e.querySelector(".activeRecordingItems");if(!t.Items.length)return e.querySelector(".activeRecordingsSection").classList.add("hide"),void(a.innerHTML="");e.querySelector(".activeRecordingsSection").classList.remove("hide"),a.innerHTML=v.default.getCardsHtml({items:t.Items,shape:"auto",defaultShape:"backdrop",showTitle:!0,showParentTitle:!0,coverImage:!0,cardLayout:!1,centerText:!0,preferThumb:"auto",overlayText:!1,overlayMoreButton:!0,action:"none",centerPlayButton:!0}),h.default.lazyChildren(a)}))}(e,g),m.ZP.hide()),(0,S.Z)({mode:"on",taskKey:"RefreshLibrary",button:c.querySelector(".btnRefresh")})})),e.addEventListener("viewbeforehide",(function(){var e=ApiClient;i.Events.off(l.default,"RestartRequired",t),i.Events.off(l.default,"ServerShuttingDown",a),i.Events.off(l.default,"ServerRestarting",n),i.Events.off(l.default,"PackageInstalling",s),i.Events.off(l.default,"PackageInstallationCompleted",r),i.Events.off(l.default,"Sessions",o),i.Events.off(l.default,"ScheduledTasksInfo",d),e&&DashboardPage.stopInterval(e),(0,S.Z)({mode:"off",taskKey:"RefreshLibrary",button:this.querySelector(".btnRefresh")})})),e.addEventListener("viewdestroy",(function(){var e=this.userActivityLog;e&&e.destroy();var t=this.serverActivityLog;t&&t.destroy()}))}window.DashboardPage={startInterval:function(e){e.sendMessage("SessionsStart","0,1500"),e.sendMessage("ScheduledTasksInfoStart","0,1000")},stopInterval:function(e){e.sendMessage("SessionsStop"),e.sendMessage("ScheduledTasksInfoStop")},getSessionNowPlayingStreamInfo:function(e){var t="",a=!1,n=p.Z.getDisplayPlayMethod(e);if("DirectPlay"===n?t+=c.ZP.translate("DirectPlaying"):"Remux"===n?t+=c.ZP.translate("Remuxing"):"DirectStream"===n?t+=c.ZP.translate("DirectStreaming"):"Transcode"===n&&(e.TranscodingInfo&&e.TranscodingInfo.Framerate&&(t+="".concat(c.ZP.translate("Framerate"),": ").concat(e.TranscodingInfo.Framerate,"fps")),a=!0),a){var s=[];e.TranscodingInfo&&(e.TranscodingInfo.Bitrate&&(e.TranscodingInfo.Bitrate>1e6?s.push((e.TranscodingInfo.Bitrate/1e6).toFixed(1)+" Mbps"):s.push(Math.floor(e.TranscodingInfo.Bitrate/1e3)+" Kbps")),e.TranscodingInfo.Container&&s.push(e.TranscodingInfo.Container.toUpperCase()),e.TranscodingInfo.VideoCodec&&s.push(e.TranscodingInfo.VideoCodec.toUpperCase()),e.TranscodingInfo.AudioCodec&&e.TranscodingInfo.AudioCodec!=e.TranscodingInfo.Container&&s.push(e.TranscodingInfo.AudioCodec.toUpperCase())),s.length&&(t+="<br/><br/>"+s.join(" "))}return t},getSessionNowPlayingTime:function(e){var t=e.NowPlayingItem,a="";return t&&(e.PlayState.PositionTicks?a+=r.ZP.getDisplayRunningTime(e.PlayState.PositionTicks):a+="0:00",a+=" / ",t&&t.RunTimeTicks?a+=r.ZP.getDisplayRunningTime(t.RunTimeTicks):a+="0:00"),a},getAppSecondaryText:function(e){return e.Client+" "+e.ApplicationVersion},getNowPlayingName:function(e){var t="",a=e.NowPlayingItem;if(!a)return{html:c.ZP.translate("LastSeen",(0,g.Z)(Date.parse(e.LastActivityDate),(0,u.LP)())),image:t};var n=s()(o.ZP.getDisplayName(a)),r="";return a.Artists&&a.Artists.length?(r=n,n=s()(a.Artists[0])):a.SeriesName||a.Album?(r=n,n=s()(a.SeriesName||a.Album)):a.ProductionYear&&(r=a.ProductionYear),a.ImageTags&&a.ImageTags.Logo?t=ApiClient.getScaledImageUrl(a.Id,{tag:a.ImageTags.Logo,maxHeight:24,maxWidth:130,type:"Logo"}):a.ParentLogoImageTag&&(t=ApiClient.getScaledImageUrl(a.ParentLogoItemId,{tag:a.ParentLogoImageTag,maxHeight:24,maxWidth:130,type:"Logo"})),t&&(n='<img src="'+t+'" style="max-height:24px;max-width:130px;" />'),{html:r?n+"<br/>"+r:n,image:t}},getUsersHtml:function(e){var t=[];e.UserId&&t.push(s()(e.UserName));for(var a=0,n=e.AdditionalUsers.length;a<n;a++)t.push(s()(e.AdditionalUsers[a].UserName));return t.join(", ")},getUserImage:function(e){return e.UserId&&e.UserPrimaryImageTag?ApiClient.getUserImageUrl(e.UserId,{tag:e.UserPrimaryImageTag,type:"Primary"}):null},updateSession:function(e,t){var a,n,s;e.classList.remove("deadSession");var r=t.NowPlayingItem;r?(e.classList.add("playingSession"),e.querySelector(".btnSessionInfo").classList.remove("hide")):(e.classList.remove("playingSession"),e.querySelector(".btnSessionInfo").classList.add("hide")),t.ServerId&&-1!==t.SupportedCommands.indexOf("DisplayMessage")?e.querySelector(".btnSessionSendMessage").classList.remove("hide"):e.querySelector(".btnSessionSendMessage").classList.add("hide");var i=e.querySelector(".btnSessionPlayPause");t.ServerId&&r&&t.SupportsRemoteControl?(i.classList.remove("hide"),e.querySelector(".btnSessionStop").classList.remove("hide")):(i.classList.add("hide"),e.querySelector(".btnSessionStop").classList.add("hide"));var o=i.querySelector(".material-icons");o.classList.remove("play_arrow","pause"),o.classList.add(t.PlayState&&t.PlayState.IsPaused?"play_arrow":"pause"),e.querySelector(".sessionNowPlayingTime").innerText=DashboardPage.getSessionNowPlayingTime(t),e.querySelector(".sessionUserName").innerHTML=DashboardPage.getUsersHtml(t),e.querySelector(".sessionAppSecondaryText").innerText=DashboardPage.getAppSecondaryText(t);var l=DashboardPage.getNowPlayingName(t),d=e.querySelector(".sessionNowPlayingInfo");l.image&&l.image==d.getAttribute("data-imgsrc")||(d.innerHTML=l.html,d.setAttribute("data-imgsrc",l.image||""));var c=e.querySelector(".playbackProgress"),g=e.querySelector(".transcodingProgress"),u=100*(null==t||null===(a=t.PlayState)||void 0===a?void 0:a.PositionTicks)/(null==r?void 0:r.RunTimeTicks);c.outerHTML=f.ZP.getProgressHtml(u||0,{containerClass:"playbackProgress"}),u=null==t||null===(n=t.TranscodingInfo)||void 0===n||null===(s=n.CompletionPercentage)||void 0===s?void 0:s.toFixed(1),g.outerHTML=f.ZP.getProgressHtml(u||0,{containerClass:"transcodingProgress"});var m=DashboardPage.getNowPlayingImageUrl(r)||"",p=e.querySelector(".sessionNowPlayingContent");m!=p.getAttribute("data-src")&&(p.style.backgroundImage=m?"url('"+m+"')":"",p.setAttribute("data-src",m),m?(p.classList.add("sessionNowPlayingContent-withbackground"),e.querySelector(".sessionNowPlayingInnerContent").classList.add("darkenContent")):(p.classList.remove("sessionNowPlayingContent-withbackground"),e.querySelector(".sessionNowPlayingInnerContent").classList.remove("darkenContent")))},getClientImage:function(e){return"<img src='"+P.ZP.getDeviceIcon(e)+"' />"},getNowPlayingImageUrl:function(e){if(e&&e.BackdropImageTags&&e.BackdropImageTags.length)return ApiClient.getScaledImageUrl(e.Id,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Backdrop",tag:e.BackdropImageTags[0]});if(e&&e.ParentBackdropImageTags&&e.ParentBackdropImageTags.length)return ApiClient.getScaledImageUrl(e.ParentBackdropItemId,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Backdrop",tag:e.ParentBackdropImageTags[0]});if(e&&e.BackdropImageTag)return ApiClient.getScaledImageUrl(e.BackdropItemId,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Backdrop",tag:e.BackdropImageTag});var t=(e||{}).ImageTags||{};return e&&t.Thumb?ApiClient.getScaledImageUrl(e.Id,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Thumb",tag:t.Thumb}):e&&e.ParentThumbImageTag?ApiClient.getScaledImageUrl(e.ParentThumbItemId,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Thumb",tag:e.ParentThumbImageTag}):e&&e.ThumbImageTag?ApiClient.getScaledImageUrl(e.ThumbItemId,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Thumb",tag:e.ThumbImageTag}):e&&t.Primary?ApiClient.getScaledImageUrl(e.Id,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Primary",tag:t.Primary}):e&&e.PrimaryImageTag?ApiClient.getScaledImageUrl(e.PrimaryImageItemId,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Primary",tag:e.PrimaryImageTag}):e&&e.AlbumPrimaryImageTag?ApiClient.getScaledImageUrl(e.AlbumId,{maxWidth:Math.round(.2*d.ZP.getScreenWidth()),type:"Primary",tag:e.AlbumPrimaryImageTag}):null},systemUpdateTaskKey:"SystemUpdateTask",stopTask:function(e,t){var a=d.ZP.parentWithClass(e,"page");ApiClient.stopScheduledTask(t).then((function(){x(a,ApiClient)}))},restart:function(e){(0,Z.Z)({title:c.ZP.translate("Restart"),text:c.ZP.translate("MessageConfirmRestart"),confirmText:c.ZP.translate("Restart"),primary:"delete"}).then((function(){var t=d.ZP.parentWithClass(e,"page");t.querySelector("#btnRestartServer").disabled=!0,t.querySelector("#btnShutdown").disabled=!0,ApiClient.restartServer()}))},shutdown:function(e){(0,Z.Z)({title:c.ZP.translate("ButtonShutdown"),text:c.ZP.translate("MessageConfirmShutdown"),confirmText:c.ZP.translate("ButtonShutdown"),primary:"delete"}).then((function(){var t=d.ZP.parentWithClass(e,"page");t.querySelector("#btnRestartServer").disabled=!0,t.querySelector("#btnShutdown").disabled=!0,ApiClient.shutdownServer()}))}}},9785:function(e,t,a){a.d(t,{Kd:function(){return se},LP:function(){return re}}),a(52077),a(911);var n=a(77946),s=a(42845),r=a(11401),i=a(84146),o=a(59996),l=a(78210),d=a(9477),c=a(28024),g=a(33026),u=a(91814),m=a(88303),p=a(22410),v=a(35997),h=a(73956),y=a(86496),P=a(47182),f=a(87994),S=a(6902),I=a(35163),b=a(36749),T=a(89310),Z=a(22481),C=a(75710),L=a(11109),k=a(74270),A=a(37159),w=a(27324),x=a(68490),D=a(19046),N=a(81905),q=a(19656),M=a(5905),R=a(64660),U=a(82025),B=a(69509),E=a(69984),W=a(84216),H=a(195),F=a(77411),O=a(23282),j=a(42395),V=a(30318),z=a(45614),K=a(83305),_=a(95861),Y=a(37405),J=a(6148),G=a(63258),Q=a(50281),X=a(67889),$=a(44362),ee=a(69244),te=a(96730),ae=a(44614),ne=function(e){return{af:n.Z,ar:s.Z,"be-by":r.Z,"bg-bg":i.Z,bn:o.Z,ca:l.Z,cs:d.Z,cy:c.Z,da:g.Z,de:u.Z,el:m.Z,"en-gb":p.Z,"en-us":v.Z,eo:h.Z,es:y.Z,"es-ar":y.Z,"es-do":y.Z,"es-mx":y.Z,et:P.Z,eu:f.Z,fa:S.Z,fi:I.Z,fr:b.Z,"fr-ca":T.Z,gl:Z.Z,gsw:u.Z,he:C.Z,"hi-in":L.Z,hr:k.Z,hu:A.Z,id:w.Z,is:x.Z,it:D.Z,ja:N.Z,kk:q.Z,ko:M.Z,"lt-lt":R.Z,lv:U.Z,ms:B.Z,nb:E.Z,nl:W.Z,nn:H.Z,pl:F.Z,pt:O.Z,"pt-br":j.Z,"pt-pt":O.Z,ro:V.Z,ru:z.Z,sk:K.Z,"sl-si":_.Z,sv:Y.Z,ta:J.Z,th:G.Z,tr:Q.Z,uk:X.Z,vi:$.Z,"zh-cn":ee.Z,"zh-hk":ee.Z,"zh-tw":te.Z}[e]};function se(){return ne(ae.ZP.getCurrentLocale())||ne(ae.ZP.getCurrentLocale().replace(/-.*/,""))||v.Z}function re(){return{addSuffix:!0,locale:se()}}t.ZP={getLocale:se,getLocaleWithSuffix:re}}}]);